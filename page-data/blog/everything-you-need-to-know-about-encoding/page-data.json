{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/everything-you-need-to-know-about-encoding","webpackCompilationHash":"2a35bdc61fe9be83cdc9","result":{"data":{"markdownRemark":{"html":"<h1>Everything You Need To Know About Encoding</h1>\n<h2>What is encoding and why does it matter</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I like programming.</code></pre></div>\n<p>What is this? Everyone understands that this is a sentence indicating I like writing code. This is from human's perspective, what about computers? Computers only know 0's and 1's. Everything stored or processed in computers are those 0, 1 sequence or <code class=\"language-text\">bytes</code> and each <code class=\"language-text\">byte</code> consists of 8 <code class=\"language-text\">bits</code> (0 and 1). Here comes the question, how do computers convert the sequence of characters into a sequence of <code class=\"language-text\">bytes</code>? This is <code class=\"language-text\">encoding</code>.</p>\n<h2>Encoding schemes</h2>\n<h3>ASCII</h3>\n<p>In order to convert characters into bytes, the computer need a rule or a lookup table that could map a certain character into certain bytes. The rule or lookup table here is a <code class=\"language-text\">Encoding Scheme</code>. In English world, there are a total of 95 human readable characters, including numbers (0-9), letters(a-z, A-Z) and other non-alphanumeric characters, like \",\", \"=\", \"+\", etc. It also has 33 other values like space, line break, etc, those are not <em>printable</em> per se, but still visible in some form and useful to humans. Therefore, there are a total of 128 characters in this <code class=\"language-text\">character set</code> or <code class=\"language-text\">charset</code>. 128 is not a big number in terms of <code class=\"language-text\">charset</code>, we can use 7 bits to fully represent this <code class=\"language-text\">charset</code>, or we need to use 1 byte. This is one of the famous encoding schemes called <a href=\"https://en.wikipedia.org/wiki/ASCII\"><code class=\"language-text\">ASCII</code></a>.</p>\n<h3>Unicode</h3>\n<p>That's only English. What about other latin languages, let alone Chinese? There are tens of thousands of Chinese characters. <code class=\"language-text\">ASCII</code> has 1 byte for each character, so even we pick up the 8th bit, it could maximumly support 256 characters which is way less than needed. Therefore, there are other <code class=\"language-text\">encoding schemes</code>, for example, <a href=\"https://en.wikipedia.org/wiki/Big5\">Big-5</a> is a two-byte <code class=\"language-text\">encoding scheme</code>, it can support <code class=\"language-text\">2^16= 65536</code> distinct values and that could cover all traditional Chinese. <a href=\"https://en.wikipedia.org/wiki/GB_18030\">GB-18030</a> is another encoding scheme that could cover both traditional and simplified Chinese.</p>\n<p>Still, question remains, what about other languages or <code class=\"language-text\">charset</code>? Can we find a universal encoding scheme to cover all existing characters? Yes, <code class=\"language-text\">Unicode</code> is the solution. However, <code class=\"language-text\">Unicode</code> has 3 variations: <code class=\"language-text\">UTF-8</code>, <code class=\"language-text\">UTF-16</code> and <code class=\"language-text\">UTF-32</code>. The table below gives a summary of definitions and differences among them. See below for their strategies.</p>\n<ul>\n<li><strong>UTF-8</strong> variable-length encodings. If a character can be represented using a single byte (because its code point is a very small number), UTF-8 will encode it with a single byte. If it requires two bytes, it will use two bytes and so on. It has elaborate ways to use the highest bits in a byte to signal how many bytes a character consists of. This can save space, but may also waste space if these signal bits need to be used often.</li>\n<li><strong>UTF-16</strong> variable-length encodings. UTF-16 uses at least two bytes, growing to up to four bytes as necessary.</li>\n<li><strong>UTF-32</strong> always encodes to 4 bytes, simple but wastes a lot of space.</li>\n</ul>\n<p>Note, <code class=\"language-text\">UTF-8</code> is binary compatible with <code class=\"language-text\">ASCII</code>, every <code class=\"language-text\">ASCII</code> consists of one byte, therefore for each character in <code class=\"language-text\">ASCII</code> charset, it has the same binary representation in <code class=\"language-text\">UTF-8</code>.</p>\n<h2>Why went wrong</h2>\n<p>The key to encoding &#x26; decoding is that both ends need to stick to the same encode/decode scheme. If the decoder is using a different scheme as encoder uses, information will become garbled.</p>\n<h2>Encoding and programming languages</h2>\n<p>We often hear the concept that 'XXX language natively support Unicode' or 'XXX language natively doesn't support Unicode'. For example, 'PHP doesn't support Unicode' and 'JavaScript natively supports Unicode'. What does that mean? Whenever we type something in text editor/IDE, it's already been decoded, either in some Unicode encoding scheme or some other one. So what on earth does it mean for a language to natively support or not support Unicode? It basically refers to whether a language assumes one character equals one byte or not. For example in PHP, it has such assumption.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$string</span> <span class=\"token operator\">=</span> <span class=\"token double-quoted-string string\">\"加油\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token variable\">$string</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If we execute the php code above on some online editor, it will print an invalid character �, the reason is php will return first byte of <code class=\"language-text\">$string</code>, and the editor try to decode it with <code class=\"language-text\">UTF-8</code> scheme, however,  the first byte is not a valid <code class=\"language-text\">UTF-8</code> code.</p>\n<p>For some other programming language like <code class=\"language-text\">JavaScript</code>, if we do similar thing, it will return the first character instead of first byte.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> string <span class=\"token operator\">=</span> <span class=\"token string\">\"加油\"</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"加\"</span></code></pre></div>\n<p>The reason is very string in JavaScript is <code class=\"language-text\">UTF-16</code> encoded, with encoding scheme known to the parser, it will give the correct character when we manipulate the string.</p>\n<h2>References</h2>\n<ol>\n<li><a href=\"http://kunststube.net/encoding/\">What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text</a></li>\n</ol>","frontmatter":{"date":"December 20, 2017","path":"/blog/everything-you-need-to-know-about-encoding","title":"Everything You Need To Know About Encoding"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}